<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invitación Baby Shower - Regina Sofía</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #fffbf0;
            text-align: center;
            padding: 20px;
            overflow-y: auto; /* Permitir desplazamiento vertical */
            position: relative;
            height: 100vh; /* Altura completa para que se pueda desplazar */
        }
        .burbuja {
            position: absolute;
            bottom: -50px;
            border-radius: 50%;
            animation: subirBurbuja 15s linear infinite;
            opacity: 0.8;
        }
        @keyframes subirBurbuja {
            0% {
                transform: translateY(0);
                opacity: 0.5;
            }
            100% {
                transform: translateY(-100vh);
                opacity: 0;
            }
        }
        .decoracion {
            position: absolute;
            top: -30px;
            right: -30px;
            width: 100px;
        }
        .invitacion {
            background-color: #fff3cd;
            border: 5px solid #f9c74f;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            max-width: 400px;
            margin: 50px auto;
        }
        h1 {
            color: #d48b31;
        }
        .boton {
            background-color: #f4a261;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 18px;
            border-radius: 5px;
            cursor: pointer;
        }
        .boton:hover {
            background-color: #e76f51;
        }
        .imagen-personalizada {
            width: 200px;
            height: auto;
            margin-bottom: 15px;
        }
        input[type="number"],
        input[type="text"] {
            width: 80%;
            padding: 10px;
            margin: 5px 0;
            border: 2px solid #f9c74f;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="invitacion">
        <img src="1.webp" class="imagen-personalizada">

        <h1>¡Estás Invitado al Baby Shower de nuestra pequeña Regina Sofía!</h1>
        <p>Ven a celebrar con nosotros esta ocasión tan especial.</p>
        <p>Te esperamos el <strong>18 de Mayo del 2025</strong> de <strong>13:00 a las 18:00 hrs</strong>.</p>
        <p>Ubicación: <a href="https://maps.app.goo.gl/gx2aHk5RRhphrE239" target="_blank">Ver en Google Maps</a></p>
        <p>Por favor confirma tu asistencia y cuántas personas te acompañarán:</p>
        <input type="number" id="asistentes" placeholder="Número de asistentes" min="1">
        <input type="text" id="nombre" placeholder="Tu nombre" required>
        <button class="boton" onclick="confirmarAsistencia()">Confirmar Asistencia</button>
        <p id="contador">Personas confirmadas: 0</p>
    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

        <script>
        let contador = 0;

        function confirmarAsistencia() {
            const asistentes = parseInt(document.getElementById('asistentes').value) || 0;
            const nombre = document.getElementById('nombre').value || "Invitado";

            if (asistentes > 0) {
                contador += asistentes;
                document.getElementById('contador').innerText = `Personas confirmadas: ${contador}`;
                
                // Enviar datos al script de Google Apps
                const url = "https://script.google.com/macros/s/AKfycbxu2S9Mix_gY0lmy4hQPJoo4RrIcJBHF8wBUQgOT0ALcxlB0P2LOj4ObTPuSCvq3yvE/exec";
                const params = {
                    method: "POST",
                    body: new URLSearchParams({
                        asistentes: asistentes,
                        nombre: nombre
                    })
                };
                fetch(url, params)
                    .then(response => response.json())
                    .then(data => {
                        alert("¡Gracias por confirmar tu asistencia!");
                        generarPDF(nombre, asistentes);

                    })
                    .catch(error => {
                        alert("Hubo un error al enviar los datos.");
                    });
            } else {
                alert('Por favor ingresa un número válido de asistentes.');
            }
        }

function generarPDF(nombre, asistentes) {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // Configurar los márgenes del PDF
    const margenIzquierdo = 15;
    const margenSuperior = 10;

    // Agregar la imagen (se puede cargar desde una URL)
  const imagen = document.querySelector('.imagen-personalizada');
    const imagenCargada = new Image();

    imagenCargada.onload = function () {
         doc.addImage(imagenCargada, 'WEBP', margenIzquierdo, margenSuperior, 60, 60);
        // Fondo color amarillo claro para emular la invitación digital
        doc.setFillColor(255, 243, 205);  // Color similar al fondo de la invitación
        doc.rect(0, 0, 210, 297, 'F');  // Fondo con relleno

        // Título con estilo mejorado
        doc.setFont("Helvetica", "bold");
        doc.setFontSize(18);
        doc.setTextColor(214, 139, 49);  // Color cálido similar al de la invitación
        doc.text("¡Estás Invitado al Baby Shower de Regina Sofía!", margenIzquierdo, 80);

        // Crear borde decorativo alrededor del contenido
        doc.setLineWidth(3);
        doc.setDrawColor(249, 199, 79);  // Color dorado
        doc.rect(margenIzquierdo - 5, 70, 200, 150);  // Rectángulo alrededor del contenido

        // Datos de la invitación con color y estilo
        doc.setFont("Helvetica", "normal");
        doc.setFontSize(14);
        doc.setTextColor(0, 0, 0);  // Color negro para el texto
        doc.text(`Nombre: ${nombre}`, margenIzquierdo, 95);
        doc.text(`Número de Asistentes: ${asistentes}`, margenIzquierdo, 105);

        // Sección de instrucciones con numeración
        doc.setFontSize(12);
        doc.setTextColor(0, 0, 0);
        doc.text("Instrucciones para el día del evento:", margenIzquierdo, 115);
        doc.text("1. Los invitados pueden ingresar 15 min antes de las 13:00hrs", margenIzquierdo, 125);
        doc.text("2. La salida será máximo 20 min después de las 18:00hrs", margenIzquierdo, 135);
        doc.text("3. El estacionamiento tiene un costo de $60", margenIzquierdo, 145);
        doc.text("4. El acceso a los juegos es libre, así como a los inflables y mini campo de futbol", margenIzquierdo, 155);

        // Datos adicionales con fondo coloreado
        doc.setFillColor(249, 199, 79);  // Color amarillo dorado para resaltar
        doc.rect(margenIzquierdo - 5, 160, 200, 40, 'F');  // Fondo dorado
        doc.setTextColor(0, 0, 0);  // Cambiar el texto a negro
        doc.setFontSize(12);
        doc.text("Te esperamos el 18 de Mayo del 2025 de 13:00 a las 18:00 hrs.", margenIzquierdo, 170);
        doc.text("Ubicación: Ver en Google Maps: https://maps.app.goo.gl/gx2aHk5RRhphrE239", margenIzquierdo, 180);

        // Agregar bordes decorativos adicionales (por ejemplo, en el área de instrucciones)
        doc.setLineWidth(1);
        doc.setDrawColor(214, 139, 49);  // Color cálido
        doc.rect(margenIzquierdo - 5, 110, 200, 50);  // Borde alrededor de las instrucciones

        // Generar y descargar el PDF
        doc.save(`${nombre}_Invitacion_Baby_Shower.pdf`);
    };

    imagenCargada.src = imagen.src;
}

        function crearBurbujas() {
            for (let i = 0; i < 50; i++) {
                const burbuja = document.createElement('div');
                burbuja.classList.add('burbuja');
                burbuja.style.width = `${Math.random() * 40 + 10}px`;
                burbuja.style.height = burbuja.style.width;
                burbuja.style.left = `${Math.random() * 100}vw`;
                burbuja.style.animationDuration = `${Math.random() * 10 + 5}s`;
                burbuja.style.backgroundColor = `rgba(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255}, 0.8)`;
                document.body.appendChild(burbuja);
            }
        }
        crearBurbujas();
    </script>
</body>
</html>
